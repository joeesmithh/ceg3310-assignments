.ORIG x3000

BEGIN

AND R2, R2, #0

; Prompt
LEA R0, PROMPT
PUTS

ENTER
GETC
OUT

; Check new line
LD R1, NEG_NL
ADD R1, R0, R1
BRz DONE



LD R1, NEG_SIXTY_FIVE
ADD R4, R0, R1

LD R1, NEG_24

ADD R1, R4, R1 ; Validate < 24
BRp ENTER
LD R3, POS_24
ADD R1, R1, R3  ; Validate > 0
BRn ENTER

; It was uppercase
ADD R2, R2, #1

BRnzp ENTER

DONE



LEA R0, RESULT
PUTS
LD R1, POS48
ADD R0, R2, R1
OUT

LD R0, NL
OUT

BRnzp BEGIN


HALT

; Variables
NEG48 .FILL xFFD0
POS48 .FILL x0030
SIXTY_FIVE .FILL x0041
NEG_SIXTY_FIVE .FILL xFFBF
NEG_24 .FILL xFFE8
POS_24 .FILL x0018
NL .FILL x000A
NEG_NL .FILL xFFF6
PROMPT .STRINGZ	"Please enter a string: "
RESULT .STRINGZ	"Uppercase letters: "
MIN_UPPER .FILL xFFBF
MAX_UPPER .FILL x005A

.END